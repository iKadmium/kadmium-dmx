<app-busy-card [loading]="loading" [saving]="false"></app-busy-card>
<mat-card *ngIf="!loading" class="main-card" @slideIn>
    <mat-card-content>
        <div class="example-header">
            <mat-form-field>
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
            </mat-form-field>
        </div>
        <table>
            <tr *ngFor="let element of filteredData" @fadeOut>
                <td @fadeIn>
                    {{element.manufacturer}} {{element.model}}
                </td>
                <td class="actionsCell">
                    <a mat-icon-button matTooltip="Download" [href]="getDownloadUrl(element)" [download]="element.manufacturer + ' ' + element.model + '.json'">
                        <mat-icon aria-label="Download">file_download</mat-icon>
                    </a>
                    <a mat-icon-button matTooltip="Edit" [routerLink]="element.id">
                        <mat-icon aria-label="Edit">edit</mat-icon>
                    </a>
                    <button mat-icon-button matTooltip="Delete" color="warn" (click)="deleteConfirm(element)">
                        <mat-icon aria-label="Delete">delete</mat-icon>
                    </button>
                </td>
            </tr>
        </table>

    </mat-card-content>
    <mat-card-actions>
        <a mat-icon-button routerLink="new" matTooltip="Add">
            <mat-icon aria-label="Add">add</mat-icon>
        </a>
        <button mat-icon-button (click)="upload(fileInput)" matTooltip="Upload">
            <mat-icon aria-label="Upload">file_upload</mat-icon>
        </button>
    </mat-card-actions>
</mat-card>

<input #fileInput type="file" name="name" style="display: none;" (change)="filesSelected($event.target.files)" multiple>