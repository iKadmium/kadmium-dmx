@using kadmium_osc_dmx_dotnet_core
@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = "~/Views/Shared/_ListLayout.cshtml";
    ViewData["Title"] = "Venues";

    var transmitters = new InputSubWindow("transmitters", "Transmitters", "$parent.editTransmitters.bind($parent)", "selectedItem().selectedUniverse",
        new InputCollection("transmitters", "Transmitters", "addTransmitter", "removeTransmitter",
            new InputSelect("name", "Name", MasterController.Instance.Transmitters.ToDictionary(x => x.Name, x => x.DisplayName)),
            new InputNumber("universeID", "Universe ID", 1, 255, 1)
        )
    );

    var optionsWindow = new InputSubWindow("options", "Options", "$parent.editOptions.bind($parent)", "selectedItem().selectedUniverse().selectedFixture().options",
        new InputCollection("axisRestrictions", "Axis Restrictions", "addAxisRestriction", "removeAxisRestriction",
            new InputSelect("name", "Axis", new Dictionary<string, string>()
            {
                ["Pan"] = "Pan",
                ["Tilt"] = "Tilt"
            }),
            new InputNumber("min", "Minimum", -270, 270),
            new InputNumber("min", "Maximum", -270, 270)
        ),
        new InputCollection("axisInversions", "Axis Inversions", "addAxisInversion", "removeAxisInversion",
            new InputSelect("name", "Axis", new Dictionary<string, string>()
            {
                ["Pan"] = "Pan",
                ["Tilt"] = "Tilt"
            })
        )
    );

    var fixtures = new InputSubWindow("fixtures", "Fixtures", "$parent.editFixtures.bind($parent)", "selectedItem().selectedUniverse",
        new InputCollection("fixtures", "Fixtures:", "addFixture", "removeFixture",
            new InputSelect("type", "Model", FileAccess.GetFixtureNames().ToDictionary(x => x)),
            new InputNumber("channel", "Channel", 1, 512),
            new InputSelect("group", "Group", MasterController.Instance.Groups.Keys.ToDictionary(x => x)),
            optionsWindow
        )
    );

    var inputs = new InputElement[]
    {
        new InputText("name", "Name:"),
        new InputCollection("universes", "Universes:", "addUniverse", "removeUniverse",
            new InputText("name", "Name"),
            transmitters,
            fixtures
        )
    };
}
@{ 
  @Html.Partial("InputSubWindowModal", transmitters)
  @Html.Partial("InputSubWindowModal", fixtures)
  @Html.Partial("InputSubWindowModal", optionsWindow)
  @Html.Partial("ModalEdit", inputs) 
}


<script src="~/js/Venues.js"></script>