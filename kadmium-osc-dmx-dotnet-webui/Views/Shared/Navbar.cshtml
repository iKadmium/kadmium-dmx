@using kadmium_osc_dmx_dotnet_core;
@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    EnablementOptions hasGroups = new EnablementOptions
    {
        EnablementFunction = (() => MasterController.Instance.Groups.Count > 0),
        DisabledTitle = "At least one group must be defined"
    };

    EnablementOptions venueLoaded = new EnablementOptions
    {
        EnablementFunction = (() => MasterController.Instance.Venue != null),
        DisabledTitle = "A venue must be loaded"
    };

    EnablementOptions hasTransmitters = new EnablementOptions
    {
        EnablementFunction = (() => MasterController.Instance.Transmitters.Count > 0),
        DisabledTitle = "At least one transmitter must be defined"
    };

    EnablementOptions hasGroupsAndTransmitters = new EnablementOptions
    {
        EnablementFunction = (() => MasterController.Instance.Groups.Count > 0 && MasterController.Instance.Transmitters.Count > 0),
        DisabledTitle = "At least one group and one transmitter must be defined"
    };

    var Navbar = new[] {
        new NavbarItem("Preview", "Preview2D", "2D Preview", enablementOptions: venueLoaded, id: "preview"),
        new NavbarItem("Groups"),
        new NavbarItem("Venues",
            new NavbarItem("Venues", enablementOptions: hasGroupsAndTransmitters),
            new NavbarItem("FixtureCollections", display: "Fixture Collections")
        ),
        new NavbarItem("Fixtures"),
        new NavbarItem("Listeners",
            new NavbarItem("OSCListeners", display: "OSC")
        ),
        new NavbarItem("Transmitters",
            new NavbarItem("SACNTransmitters", display: "sACN")
        ),
        new NavbarItem("Tools",
            new NavbarItem("RawDMX", display: "Raw DMX", enablementOptions: hasTransmitters)
        ),
        new NavbarItem("Help",
            new NavbarItem("Help", "Index", "Help"),
            new NavbarItem("ProjectPage", "Project Page" ),
            new NavbarItem("Help", "About", "About")
        )
    };
}

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a asp-area="" asp-controller="Home" asp-action="Index" class="navbar-brand">kadmium-osc-dmx</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                @foreach (NavbarItem item in Navbar)
                {
                    if (item.Children.Count() > 0)
                    {
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                @item.Display <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu">
                                @foreach (NavbarItem child in item.Children)
                                {
                                    @Html.Partial("NavbarItem", child);
                                }
                                
                            </ul>
                        </li>

                    }
                    else
                    {
                        @Html.Partial("NavbarItem", item);
                    }
                }
            </ul>
        </div>
    </div>
</div>